!function(){"use strict";angular.module("wontApp",["ui.router","ngAnimate","ngMaterial","ngCookies","ngStorage","ngRoute","ngResource","ngSanitize","ui.bootstrap","ngProgress","ngJcrop","lr.upload","mobile-angular-ui","home","nav","login","register","forgetpass","resend_activation","comprofile","homepage","profile","dictionary","message","settings","makePost","comments","taah","invite","mainMiddle","admin"]).factory("authInterceptor",["$q","$location","$localStorage",function(a,b,c){return{request:function(a){return a.headers=a.headers||{},c.w_token&&(a.headers.Authorization="Bearer "+c.w_token),a},responseError:function(c){return 401!==c.status&&403!==c.status||b.path("/login"),a.reject(c)}}}]).config(["$httpProvider",function(a){a.interceptors.push("authInterceptor")}]).config(["$urlRouterProvider","$locationProvider",function(a,b){a.otherwise("/home"),b.html5Mode(!0)}]).run(["$rootScope","ngProgressFactory","auth","$state",function(a,b,c,d){a.progressbar=b.createInstance(),a.$on("$stateChangeStart",function(){a.progressbar.start()}),a.$on("$stateNotFound",function(){c.isLoggedIn()?d.go("homepage"):d.go("home")}),a.$on("$stateChangeSuccess",function(){a.progressbar.complete(),c.isLoggedIn()&&a.$broadcast("state-change",{stateChange:!0})}),a.$on("$stateChangeError",function(){a.progressbar.complete()}),a.$on("$viewContentLoaded",function(){a.progressbar.complete()})}]).controller("mainController",["$scope","auth",function(a,b){function c(){window.innerWidth<1024?a.desktop?$("#refresh").show():$("#refresh").hide():a.mobile?$("#refresh").show():$("#refresh").hide()}function d(){a.desktop=!1,a.mobile=!0,e.setAttribute("href","libs/css/vendor-mobile.min.css")}a.isLoggedIn=b.isLoggedIn;var e=document.getElementById("sheet");window.onresize=c,window.matchMedia("(max-width: 321px)").matches?d():window.matchMedia("(max-width: 361px)").matches?d():window.matchMedia("(max-width: 767px)").matches&&d(),window.matchMedia("(max-width: 799px)").matches&&d(),window.matchMedia("(max-width: 1024px)").matches?d():(e.setAttribute("href","libs/css/vendor-desktop.min.css"),a.desktop=!0,a.mobile=!1),a.reloadPage=function(){window.location.reload()},a.revealCont=function(a){var b=document.getElementById(a);b.style.height="200px"===b.style.height?"0px":"200px"},a.Suname="",a.Smessage="",a.SaveSuggestion=function(c,d){b.isLoggedIn()?a.u=b.currentUser().username:a.u="",b.savesuggestions(a.Suname,a.Smessage,a.u).success(function(b){swal("Thank you "+a.Suname,"We appreciate your contribution","success"),a.Suname="",a.Smessage=""}).error(function(a){swal("",a.message,"error")})}}])}(),function(a){a.fn.simpleCropper=function(b){function c(){j=0,k=0,l=0,m=0,n=0,o=0,p=null,q=null,v=null,r=1,s=1,t=null}function d(b){var c=a("#fileInput").get(0).files[0],d=/image.*/;if(c.type.match(d)){var f=new FileReader;q=c.name,f.onload=function(c){a("#photo").remove(),v=f.result,p=new Image,p.src=f.result,p.id="photo",p.style.maxWidth=h+"px",p.style.maxHeight=i+"px",p.onload=function(){function b(){a("#preview").css("top","0px"),a("#preview").css("left","0px")}p.width>h||p.height>i?(p.width>p.height&&(j=h,k=h*p.height/p.width),p.width<p.height&&(k=i,j=i*p.width/p.height),p.width==p.height&&(j=h,k=i)):(j=p.width,k=p.height),p.style.width=j+"px",p.style.height=k+"px",a("#modal").css("display","block");var c=a(window).width()/2-j/2+"px",d=a(window).height()/2-k/2+"px";a("#preview").show(500),window.matchMedia("(max-width: 321px)").matches?b():window.matchMedia("(max-width: 361px)").matches?b():window.matchMedia("(max-width: 767px)").matches&&b(),window.matchMedia("(max-width: 799px)").matches&&b(),window.matchMedia("(max-width: 1024px)").matches?b():(a("#preview").css("top",d),a("#preview").css("left",c));var f=0,l=0,m=Math.floor(k*r/s);m>j?(f=j,l=30.97893432*f/69.02106568):(f=m,l=30.97893432*f/69.02106568),u=a(this).Jcrop({onSelect:e,onChange:e,bgColor:"#747474",bgOpacity:.4,aspectRatio:f/l,setSelect:[0,0,f,l]},function(){g=this})},b.appendChild(p)},f.readAsDataURL(c)}else b.innerHTML="File not supported!"}function e(a){l=a.x,m=a.y,n=a.x2,o=a.y2}function f(){var c=document.getElementById("myCanvas"),d=c.getContext("2d");d.clearRect(0,0,c.width,c.height);var e=n-l,f=o-m,g=p.naturalWidth,h=p.naturalHeight,i=g/a("#preview").width(),j=h/a("#preview").height();c.width=r,c.height=s,d.drawImage(p,l*i,m*j,e*i,f*j,0,0,r,s);var k=c.toDataURL(),u=document.createElement("img");u.src=k,a("#preview").delay(100).hide(),a("#modal").hide(),t.html(""),t.append(u),b&&b({original:{filename:q,base64:v,width:p.width,height:p.height},crop:{x:l*i,y:m*j,width:e*i,height:f*j}})}var g,h=600,i=600,j=0,k=0,l=0,m=0,n=0,o=0,p=null,q=null,r=1,s=1,t=null,u=null,v=null,w="<input type='file' id='fileInput' name='files[]'/ accept='image/*'><canvas id='myCanvas' style='display:none;'></canvas><div id='modal'></div><div id='preview'><div class='buttons'><div class='cancel'></div><div class='ok'></div></div></div>";a("body").append(w),this.click(function(){r=a(this).width(),s=a(this).height(),t=a(this),a("#fileInput").click()}),a(document).ready(function(){a("#fileInput").change(function(b){d(a("#preview").get(0)),a(this).val("")}),a(".ok").click(function(){f(),a("#preview").delay(100).hide(),a("#modal").hide(),g.destroy(),c()}),a(".cancel").click(function(b){a("#preview").delay(100).hide(),a("#modal").hide(),g.destroy(),c()})}),a(window).resize(function(){var b=a(window).width()/2-j/2+"px",c=a(window).height()/2-k/2+"px";window.matchMedia("(max-width: 321px)").matches?mobileFile():window.matchMedia("(max-width: 361px)").matches?mobileFile():window.matchMedia("(max-width: 767px)").matches&&mobileFile(),window.matchMedia("(max-width: 799px)").matches&&mobileFile(),window.matchMedia("(max-width: 1024px)").matches?mobileFile():(a("#preview").css("top",c),a("#preview").css("left",b))})}}(jQuery),function(){var a=function(a,b,c,d,e,f,g,h){a.isLoggedIn=b.isLoggedIn,b.allInfo().success(function(b){b.completeprofile?(a.completeprocess=!1,a.luname=b.username,a.username=b.username):d.go("comprofile.pInfo")}).error(function(a){}),c.$broadcast("complete-process",{completeprocess:!1}),h.statusVariables(a,5,!0,"hot"),a.getAllHott=function(){h.statusVariables(a,5,!0,"hot"),a.hotContent()},a.hotContent=function(){e.getAllHot(a.limit).success(function(b){h.successfunc(a,"h",b)}).error(function(b){h.errorfunc(a,b)})},a.hotContent(),a.getAllNewt=function(){h.statusVariables(a,5,!0,"new"),a.newContent()},a.newContent=function(){e.getAllNew(a.limit).success(function(b){h.successfunc(a,"n",b)}).error(function(b){h.errorfunc(a,b)})},a.getAllCont=function(b){h.statusVariables(a,5,!0,"con"),a.cv=b,a.conContent(b)},a.conContent=function(b){console.log(b),e.getAllCon(a.limit,b.value).success(function(b){h.successfunc(a,"c",b)}).error(function(b){h.errorfunc(a,b)})},a.getAllTopt=function(b){h.statusVariables(a,5,!0,"top"),a.tv=b,a.topContent(b)},a.topContent=function(b){e.getAllTop(a.limit,b.value).success(function(b){h.successfunc(a,"t",b)}).error(function(b){h.errorfunc(a,b)})},a.loadmore=function(b){a.mload=!0,"hot"===b?a.hotContent():"new"===b?a.newContent():"con"===b?a.conContent(a.cv):"top"===b&&a.topContent(a.tv)},h.subAlt(a,f,g),a.completed=!1,a.$on("completeHome",function(){a.completed=!0}),a.showContent=function(a,b){localStorage.setItem("content",JSON.stringify(b)),h.fulldialog(a,"homepageController","partials/templates/mobile/content.mob.html")},a.makeSubmission=function(a){h.fulldialog(a,"homepageController","partials/templates/mobile/makeSubmission.mob.html")},h.scopeOnly(a),localStorage.content&&(a.content=JSON.parse(localStorage.content))};angular.module("homepage",[]).config(["$stateProvider",function(a){a.state("homepage",{url:"/homepage",templateUrl:"partials/logged/home.html",controller:"homepageController",onEnter:["$state","auth",function(a,b){b.isLoggedIn()||a.go("login")}]})}]).controller("homepageController",["$scope","auth","$rootScope","$state","sub","vote","postedtimes","msub",a])}(),function(){var a=function(a,b,c,d){a.isLoggedIn=b.isLoggedIn,a.isProcessing=!1,a.limit=5,a.online=function(){d.getFrOnline(1e3).success(function(b){a.onlfriends=b}),d.getFrFrnds(a.limit).success(function(b){a.friends=b})},b.isLoggedIn()&&(a.online(),a.$on("state-change",function(){a.online()}))};angular.module("mainMiddle",[]).controller("mainMiddleCtrl",["$scope","auth","$state","user",a])}(),function(){var a=function(a,b){a.isLoggedIn=b.isLoggedIn};angular.module("home",[]).config(["$stateProvider",function(a){a.state("home",{url:"/home",templateUrl:"partials/home.html",controller:"homeController",reloadOnSearch:!1,onEnter:["$state","auth",function(a,b){b.isLoggedIn()&&a.go("homepage")}]})}]).controller("homeController",["$scope","auth",a])}(),function(){var a=function(a,b,c,d){d.Load(a,!1,!1),a.isLoggedIn=c.isLoggedIn,a.LoginUser=function(e){d.Load(a,!0,!0),c.logIn(e).error(function(b){swal("Oops!",b.message,"error"),d.Load(a,!1,!1)}).then(function(c){c.data.user.firstname?(a.$broadcast("userprofile-credentials"),b.go("homepage")):b.go("comprofile.pInfo"),d.Load(a,!1,!1)})}};angular.module("login",[]).config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"partials/login.html",controller:"loginController",reloadOnSearch:!1,onEnter:["$state","auth",function(a,b){b.isLoggedIn()&&a.go("homepage")}]})}]).controller("loginController",["$scope","$state","auth","msub",a])}(),function(){var a=function(a,b,c,d){d.Load(a,!1,!1),a.isLoggedIn=c.isLoggedIn,a.RegisterUser=function(e){d.Load(a,!0,!0),c.register(e).error(function(b){swal("Oops!",b.message,"error"),d.Load(a,!1,!1)}).then(function(){b.go("comprofile.pInfo"),d.Load(a,!1,!1)})}};angular.module("register",[]).config(["$stateProvider",function(a){a.state("register",{url:"/register",templateUrl:"partials/register.html",controller:"registerController",reloadOnSearch:!1,onEnter:["$state","auth",function(a,b){b.isLoggedIn()&&a.go("homepage")}]})}]).controller("registerController",["$scope","$state","auth","msub",a])}(),function(){var a=function(a,b,c){c.Load(a,!1,!1),a.isLoggedIn=b.isLoggedIn,a.ResetPassword=function(d){c.Load(a,!0,!0),b.forgetPass(d).success(function(){c.Load(a,!1,!1),a.click="message"}).error(function(b){swal("Oops!",b.message,"error"),c.Load(a,!1,!1)})},a.Goback=function(){a.click="other"}};angular.module("forgetpass",[]).config(["$stateProvider",function(a){a.state("forgetpass",{url:"/forgetpass",templateUrl:"partials/forgetPass.html",controller:"forgetpassController",reloadOnSearch:!1,onEnter:["$state","auth",function(a,b){b.isLoggedIn()&&a.go("homepage")}]})}]).controller("forgetpassController",["$scope","auth","msub",a])}(),function(){var a=function(a,b,c){c.Load(a,!1,!1),a.isLoggedIn=b.isLoggedIn,a.ResendActivation=function(d){c.Load(a,!0,!0),b.resendActivation(d).success(function(){c.Load(a,!1,!1),a.click="message"}).error(function(b){swal("Oops!",b.message,"error"),c.Load(a,!1,!1)})},a.Goback=function(){a.click="other"}};angular.module("resend_activation",[]).config(["$stateProvider",function(a){a.state("resend_activation",{url:"/resend_activation",templateUrl:"partials/activateMail.html",controller:"activationMailController",reloadOnSearch:!1,onEnter:["$state","auth",function(a,b){b.isLoggedIn()&&a.go("homepage")}]})}]).controller("activationMailController",["$scope","auth","msub",a])}(),function(){var a=function(a,b,c,d,e,f){function g(a){}a.selectedItemChange=g,a.$on("complete-process",function(b,c){a.completeprocess=c.completeprocess}),a.logout=function(){b.logOut().error(function(){}).then(function(){c.go("login")})},a.userInfo1=function(){f.LogUserInfo(a)},b.isLoggedIn()&&(a.getAllU=function(){d.getallUsers().success(function(b){a.users=b,a.userInfo1()})},a.$on("state-change",function(){a.userInfo1()}),a.getAllU(),a.$on("userprofile-credentials",function(){a.getAllU()})),a.navStuff=function(){a.isLoggedIn=b.isLoggedIn,a.currentUser=b.currentUser,a.$on("get-user-taahs",function(b,c){a.taahs=c.taahs}),a.$on("new-message-check",function(b,c){a.unreadCnt=c.unreadcnt}),a.$on("mark-as-read",function(){a.unreadCnt--}),a.$on("avatar-uploaded",function(b,c){a.currentUser.avatar=c.image})},a.navStuff(),a.items=[{name:"About Wontah",icon:"ion-information-circled",ref:"about"},{name:"Wontah, inc. Terms of Service",icon:"ion-clipboard",ref:"terms-of-service"},{name:"Wontah, inc. Privacy Policy",icon:"ion-locked",ref:"privacy-policy"}],a.listItemClick=function(b){var c=a.items[b];e.hide(c)},a.getSources=function(){e.show({templateUrl:"partials/templates/mobile/source.html",controller:"navController",clickOutsideToClose:!0})},a.items2=[{name:"Documentation",icon:"ion-clipboard",ref:"documentation"},{name:"Wontah Blog",icon:"ion-chatbox-working",ref:"blog"},{name:"Get Support on Wontah",icon:"ion-settings",ref:"how-it-works"}],a.listItemClick2=function(b){var c=a.items2[b];e.hide(c)},a.getStarted=function(){e.show({templateUrl:"partials/templates/mobile/getStarted.html",controller:"navController",clickOutsideToClose:!0})},a.hideRight=function(){a.navStuff(),$(".sidebar-right").hide(),$(".sidebar-left").show(),console.log(b.currentUser())},a.hideLeft=function(){a.navStuff(),$(".sidebar-right").show(),$(".sidebar-left").hide(),console.log(b.currentUser())}};angular.module("nav",["requests"]).config(["$stateProvider",function(a){a.state("terms-of-service",{url:"/terms-of-service",templateUrl:"partials/wontah/terms_of_service.html",reloadOnSearch:!1}).state("about",{url:"/about",templateUrl:"partials/wontah/about.html",reloadOnSearch:!1}).state("documentation",{url:"/documentation",templateUrl:"partials/wontah/documentation.html",reloadOnSearch:!1}).state("blog",{url:"/blog",templateUrl:"partials/wontah/blog.html",reloadOnSearch:!1}).state("status",{url:"/status",templateUrl:"partials/wontah/status.html",reloadOnSearch:!1}).state("how-it-works",{url:"/how-it-works",templateUrl:"partials/wontah/how-it-works.html",reloadOnSearch:!1}).state("privacy-policy",{url:"/privacy-policy",templateUrl:"partials/wontah/privacy_policy.html",reloadOnSearch:!1})}]).controller("navController",["$scope","auth","$state","user","$mdBottomSheet","msub",a])}(),function(){var a=function(a,b,c,d,e,f,g){a.isLoggedIn=b.isLoggedIn,a.openNotifications=function(){d.updateCheck().then(function(){a.ncount=0})},a.allrequests=function(){a.thereIsRequest=!1,a.thereIsNofication=!1,d.getRequests().then(function(b){b.data.Request?(a.thereIsRequest=!0,a.rcount=b.data.Rcount,a.frndReq=b.data.person,a.invTaah=b.data.tinvite):(a.thereIsRequest=!1,a.rcount=0)}),d.getNofications().then(function(b){b.data.Notication?(a.thereIsNofication=!0,a.ncount=b.data.Ncount,a.nfications=b.data.nfications):(a.thereIsNofication=!1,a.ncount=0)}),d.checkpm().then(function(b){a.unreadCnt=b.data.msgCount,a.newmsg=b.data.newMsg})},b.isLoggedIn()&&a.allrequests(),a.$on("state-change",function(){b.isLoggedIn()&&a.allrequests()}),a.Accept=function(b){$("#"+b+"_btns").hide(),$("#"+b+"_load").show(),$("#"+b+"_btns1").hide(),$("#"+b+"_load1").show(),d.accept(b).success(function(c){$("#"+b+"_d").hide(),$("#"+b+"_load").hide(),$("#"+b+"_acpt").show(),$("#"+b+"_d1").hide(),$("#"+b+"_load1").hide(),$("#"+b+"_acpt1").show(),a.rcount--}).error(function(a){swal("",a.message,"error")})},a.Subscribe=function(b,c){$("#"+b+c+"_btns").hide(),$("#"+b+c+"_load").show(),$("#"+b+c+"_btns1").hide(),$("#"+b+c+"_load1").show(),e.MakeSubscribtion(b).then(function(d){d.data.success?($("#"+b+c+"_d").hide(),$("#"+b+c+"_load").hide(),$("#"+b+c+"_acpt").show(),$("#"+b+c+"_d1").hide(),$("#"+b+c+"_load1").hide(),$("#"+b+c+"_acpt1").show(),a.rcount--,f.$broadcast("added-taah-to-taah-page")):swal("",d.data.message,"warning")})},a.Ignore=function(b){$("#"+b+"_btns").hide(),$("#"+b+"_load").show(),$("#"+b+"_btns1").hide(),$("#"+b+"_load1").show(),d.ignore(b).success(function(c){a.rcount--,$("#"+b+"_d").hide(),$("#"+b+"_load").hide(),$("#"+b+"_rjct").show(),$("#"+b+"_d1").hide(),$("#"+b+"_load1").hide(),$("#"+b+"_rjct1").show()}).error(function(a){swal("",a.message,"error")})},a.IgnoreNow=function(b,c){$("#"+b+c+"_btns").hide(),$("#"+b+c+"_load").show(),$("#"+b+c+"_btns1").hide(),$("#"+b+c+"_load1").show(),e.ignoreTaah(b).then(function(d){d.data.success?($("#"+b+c+"_d").hide(),$("#"+b+c+"_load").hide(),$("#"+b+c+"_rjct").show(),$("#"+b+c+"_d1").hide(),$("#"+b+c+"_load1").hide(),$("#"+b+c+"_rjct1").show(),a.rcount--):swal("",d.data.msg,"warning")})},a.MarkAsRead=function(){d.markAllAsRead().then(function(){a.ncount="0",a.nfications=[]})},a.markAsReadd=function(b,c){d.MarkasRead(b).then(function(){a.nfications.splice(c,1)})},a.showNotification=function(a){g.fulldialog(a,"requestsController","partials/templates/mobile/notification.mob.html")},a.showRequests=function(a){g.fulldialog(a,"requestsController","partials/templates/mobile/requests.mob.html")},g.scopeOnly(a)};angular.module("requests",[]).controller("requestsController",["$scope","auth","$state","user","taah","$rootScope","msub",a])}(),function(){var a=function(a,b,c,d,e,f){a.isLoggedIn=b.isLoggedIn,b.allInfo().success(function(b){a.luname=b.username,a.lavatar=b.avatar,b.completeprofile&&e.go("homepage")}).error(function(a){}),c.$broadcast("complete-process",{completeprocess:!0}),a.clickme=function(){a.click="steps"},a.Goback=function(){a.click="other"},a.$on("finished",function(){a.click="complete"}),a.$on("personal-info",function(a,b){localStorage.setItem("pInfo",JSON.stringify(b.pInfo))}),a.$on("school-info",function(a,b){localStorage.setItem("schInfo",JSON.stringify(b.schoolInfo))}),a.$on("friends-info",function(a,b){localStorage.setItem("frInfo",JSON.stringify(b.frInfo))}),a.$on("avatar-info",function(a,b){localStorage.setItem("avaInfo",JSON.stringify(b.avaInfo))}),a.$on("finished",function(){a.schInfo=localStorage.schInfo,a.pInfo=localStorage.pInfo,a.frInfo=localStorage.frInfo,a.avaInfo=localStorage.avaInfo,a.processing=!0,d.saveInfo(a.schInfo,a.pInfo,a.frInfo,a.avaInfo).success(function(b){if(a.processing=!1,localStorage.removeItem("schInfo"),localStorage.removeItem("frInfo"),localStorage.removeItem("pInfo"),"ImageSuccess"===b.message){a.user=JSON.parse(f.user_t),a.user.avatar=b.image,f.user_t=JSON.stringify(a.user);var c=$(".avatar");c.attr("src","/user/"+a.luname+"/"+b.image),c.addClass("avatar"),localStorage.removeItem("avaInfo")}}).error(function(a){swal("Oops!",a.message,"error")})}),a.pInfo=localStorage.pInfo,a.pInfo&&(a.click="steps"),a.completeHome=function(){c.$broadcast("completeHome")},a.myInterval=3e3,a.slides=[{image:"1"},{image:"2"},{image:"3"}]};angular.module("comprofile",["pInfo","schInfo","frndSug","invite","avatar"]).config(["$stateProvider",function(a){a.state("comprofile",{url:"/comprofile",templateUrl:"partials/logged/comprofile.html",controller:"comprofileController",onEnter:["$state","auth",function(a,b){b.isLoggedIn()||a.go("login")}]})}]).run(["$rootScope","$state",function(a,b){a.$state=b}]).controller("comprofileController",["$scope","auth","$rootScope","user","$state","$localStorage",a])}(),function(){var a=function(a,b,c,d){a.isLoggedIn=b.isLoggedIn,a.SubmitPform=function(a){""===a.firstname||void 0===a.firstname?swal("","You must enter your first name","error"):""===a.lastname||void 0===a.lastname?swal("","You must enter your last name","error"):""===a.gender||void 0===a.gender?swal("","You must enter your gender","error"):(c.$broadcast("personal-info",{pInfo:a}),d.go("comprofile.schInfo"))}};angular.module("pInfo",[]).config(["$stateProvider",function(a){a.state("comprofile.pInfo",{url:"/pInfo",templateUrl:"partials/logged/userInfo/pInfo/pInfo.html",controller:"pInfoController"})}]).controller("pInfoController",["$scope","auth","$rootScope","$state",a])}(),function(){function a(a,b,c,d,e){a.dloading=!0,a.depts=c.getAllDepts(a),a.selection=[],a.toggleSelection=function(b){var c=a.selection.indexOf(b);c>-1?a.selection.splice(c,1):a.selection.push(b),a.selectionId=[],angular.forEach(a.selection,function(b){a.selectionId.push(b._id)})},e.scopeOnly(a),a.hide=function(){d.hide(),b.$broadcast("dept-info",{selection:a.selection,selectionId:a.selectionId})},a.dloading=!1}var b=function(a,b,c,d,e,f){a.isStudent=!1,a.isStudentOfUg=!0,a.selection=[],a.isLoggedIn=b.isLoggedIn,a.depts=e.getAllDepts(a),a.halls=e.getAllHalls(a),a.NotStudent=function(){a.schoolInfo={status:!1},c.$broadcast("school-info",{schoolInfo:a.schoolInfo}),d.go("comprofile.avatar")},a.StudentofUg=function(){a.isStudent=!0,a.isStudentOfUg=!0},a.NotStudentofUg=function(){a.isStudent=!0,a.isStudentOfUg=!1},a.SubmitNotUgStudent=function(b){a.sch=""===b||void 0===b?"null":b,a.schoolInfo={status:!0,ug:!1,name:a.sch},c.$broadcast("school-info",{schoolInfo:a.schoolInfo}),d.go("comprofile.avatar")},a.$on("dept-info",function(b,c){a.selection=c.selection,a.selectionId=c.selectionId}),a.toggleSelection=function(b){var c=a.selection.indexOf(b);c>-1?a.selection.splice(c,1):a.selection.push(b),a.selectionId=[],angular.forEach(a.selection,function(b){a.selectionId.push(b._id)})},a.SubmitUgStudent=function(b,e){console.log(a.selection),void 0===b||void 0===b.hall||""===b.hall?swal("","Hall not selected","warning"):void 0===b||void 0===b.level||""===b.level?swal("","Level not selected","warning"):a.selection<1?swal("","Department not selected","warning"):("desktop"===e?a.hId=b.hall._id:"mobile"===e&&(a.hId=JSON.parse(b.hall)._id),a.schoolInfo={status:!0,ug:!0,name:"University of Ghana",level:b.level,hall:a.hId,department:a.selectionId},c.$broadcast("school-info",{schoolInfo:a.schoolInfo}),d.go("comprofile.frndSug"))},a.showDeptDialog=function(a){f.fulldialog(a,"deptCtrl","partials/templates/mobile/dept.mob.html")},f.scopeOnly(a)};angular.module("schInfo",[]).config(["$stateProvider",function(a){a.state("comprofile.schInfo",{url:"/schInfo",templateUrl:"partials/logged/userInfo/schInfo/schInfo.html",controller:"schInfoController"})}]).controller("schInfoController",["$scope","auth","$rootScope","$state","user","msub",b]).controller("deptCtrl",["$scope","$rootScope","user","$mdDialog","msub",a])}(),function(){var a=function(a,b,c,d,e){function f(a,b){return b.indexOf(a)>-1}a.isLoggedIn=b.isLoggedIn,a.pIno=localStorage.schInfo,JSON.parse(localStorage.schInfo).ug||d.go("comprofile.avatar"),c.getSugFrnds(a.pIno).success(function(b){a.sugFrnds=b.message,a.success=!0}).error(function(b){a.success=!1,d.go("comprofile.avatar")}),a.requestAll=function(){swal({title:"",text:"Are you sure you want to send request to all",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Send",closeOnConfirm:!1},function(){a.success&&(a.frnames=[],angular.forEach(a.sugFrnds,function(b){a.frnames.push(b.username)}),e.$broadcast("friends-info",{frInfo:a.frnames})),d.go("comprofile.avatar"),swal("","","success")})},a.frndnames=[],a.addFriend=function(b){swal({title:"",text:"Are you sure you want to send "+b+" a friendship request",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Send",closeOnConfirm:!1},function(){f(b,a.frndnames)||a.frndnames.push(b),e.$broadcast("friends-info",{frInfo:a.frndnames}),swal("","","success")})}};angular.module("frndSug",[]).config(["$stateProvider",function(a){a.state("comprofile.frndSug",{url:"/frndSug",templateUrl:"partials/logged/userInfo/frndSug/frndSug.html",controller:"frndSugController"})}]).controller("frndSugController",["$scope","auth","user","$state","$rootScope",a])}(),function(){var a=function(a,b){a.isLoggedIn=b.isLoggedIn},b=function(a,b,c,d){var e=$(".upload-avatar");a.uploaded=!1,a.isProcessing=!1,a.load=!1;var f;a.acceptTypes="image/jpeg,image/png,image/gif",a.uploadData={myformdata:"hello world"},a.onUpload=function(b){a.isProcessing=!0,a.load=!0,e.text("Uploading"),f=window.setInterval(function(){var a=e.text();a.length<13?e.text(a+"."):e.text("Uploading")},200)},a.onError=function(b){e.text("Change profile picture"),window.clearInterval(f),a.responseData=b.data},a.onComplete=function(b){window.clearInterval(f),e.text("Change profile picture"),a.filename=b.data.file,a.obj={},a.obj.src="uploads/"+a.filename,a.obj.selection=[76,3,523,450,447,447],a.obj.thumbnail=!0,$("#crop-section").show(),a.uploaded=!0,a.isProcessing=!1,a.load=!1,$("#uploader-section").hide()},a.SaveCropImage=function(){a.avatarInf={selection:a.obj.selection,filename:a.filename},c.$broadcast("avatar-info",{avaInfo:a.avatarInf}),a.uploaded=!1,d.go("comprofile.invite")}};angular.module("avatar",[]).config(["$stateProvider",function(a){a.state("comprofile.avatar",{url:"/avatar",templateUrl:"partials/logged/userInfo/avatar/avatar.html",controller:"avatarController"})}]).config(["ngJcropConfigProvider",function(a){a.setJcropConfig("upload",{bgColor:"black",bgOpacity:.4,aspectRatio:1,maxWidth:600,maxHeight:450})}]).controller("avatarController",["$scope","auth",a]).controller("AppCtrl1",["$scope",function(a){a.responseData=void 0}]).controller("AdvancedMarkupCtrl1",["$scope","auth","$rootScope","$state",b])}(),function(){var a=function(a,b,c){a.isLoggedIn=b.isLoggedIn,a.Finish=function(b){c.$broadcast("finished"),a.click="complete"}};angular.module("invite",[]).config(["$stateProvider",function(a){a.state("comprofile.invite",{url:"/invite",templateUrl:"../partials/logged/userInfo/invite.html",controller:"inviteController"})}]).controller("inviteController",["$scope","auth","$rootScope",a])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){a.isLoggedIn=d.isLoggedIn,a.cimages=[],a.profile=!0,f.$broadcast("complete-process",{completeprocess:!1}),d.allInfo().success(function(b){b.completeprofile?(a.id=b._id,a.luname=b.username,a.lavatar=b.avatar,a.lemail=b.email,a.lstatus=b.school.status,a.lstatus&&(a.lug=b.school.ug)):c.go("comprofile.pInfo")}).error(function(a){}),a.userInfo=function(){e.profileInfo(b.username).success(function(b){a.cimages=[],a.u=b,a.username=b.username,a.firstname=b.firstname,a.lastname=b.lastname,a.email=b.email,a.website=b.website,a.contact=b.contact,a.bio=b.bio,a.gender=b.gender,a.cimages=b.coverImages,a.fcount=b.fcount,a.signup=b.signup,a.lastlogin=b.lastlogin,a.status=b.status,a.school=b.school,a.isFriend=b.isFriend,a.coverStyle=b.cover_style,"f"===b.gender?a.gen="Female":a.gen="Male",""===a.coverStyle?a.coverStyle="rollIn":a.coverStyle,a.mobile&&void 0===a.cimages&&(a.cimages=["../../../img/coverDefault.jpg"]),a.cimages.length<1&&a.cimages.push("../../../img/coverDefault.jpg"),console.log(a.cimages),a.model={move:a.coverStyle},a.model.transitions=[{name:"Bounce",type:"bounce"},{name:"Bounce down",type:"bounceInDown"},{name:"Bounce left",type:"bounceInLeft"},{name:"Bounce right",type:"bounceInRight"},{name:"Bounce up",type:"bounceInUp"},{name:"Fade",type:"fadeIn"},{name:"Fade down",type:"fadeInDown"},{name:"Fade down big",type:"fadeInDownBig"},{name:"Fade left",type:"fadeInLeft"},{name:"Fade left big",type:"fadeInLeftBig"},{name:"Fade right",type:"fadeInRight"},{name:"Fade right big",type:"fadeInRightBig"},{name:"Fade up",type:"fadeInUp"},{name:"Fade up big",type:"fadeInUpBig"},{name:"Flash",type:"flash"},{name:"Flip",type:"flip"},{name:"Flip x",type:"flipInX"},{name:"Flip y",type:"flipInY"},{name:"Light Speed",type:"lightSpeedIn"},{name:"Pulse",type:"pulse"},{name:"Roll",type:"rollIn"},{name:"Rotate",type:"rotateIn"},{name:"Rotate down left",type:"rotateInDownLeft"},{name:"Rotate down right",type:"rotateInDownRight"},{name:"Rotate up left",type:"rotateInUpLeft"},{name:"Rotate up right",type:"rotateInUpRight"},{name:"Shake",type:"shake"},{name:"Swing",type:"swing"},{name:"Tada!",type:"tada"},{name:"Wobble",type:"wobble"}],a.model.images=a.cimages,a.tick=function(){a.model.images.unshift(a.model.images.pop()),g(a.tick,8e3)},a.tick(),b.frndBlkUser&&c.go("homepage")}).error(function(){c.go("homepage")})},a.userInfo(),a.changeCovers=function(a){h.fulldialog(a,"userController","partials/templates/mobile/coverPhotos.mob.html")},h.sideNav(a),h.scopeOnly(a),c.go("u.room")}angular.module("profile",["cover","request","more","about","friends","room"]).config(["$stateProvider",function(a){a.state("u",{url:"/u/:username",templateUrl:"partials/logged/user.html",controller:"userController",onEnter:["$state","auth",function(a,b){b.isLoggedIn()||a.go("login")}]})}]).run(["$rootScope","$state",function(a,b){a.$state=b}]).controller("userController",["$scope","$stateParams","$state","auth","user","$rootScope","$timeout","msub",a])}(),function(){var a=function(a,b,c,d){a.isLoggedIn=b.isLoggedIn,a.saveTrans=function(b){d.saveTransition(b.type).success(function(b){a.model.move=b.style}).error(function(){a.coverStyle="rollIn"})},a.saveCoverImgs=function(){a.cImages=[];var b=document.getElementById("cover1").innerHTML,c=document.getElementById("cover2").innerHTML,e=document.getElementById("cover3").innerHTML,f=document.getElementById("cover4").innerHTML;""!==b&&a.cImages.push($("#cover1 > img").attr("src")),""!==c&&a.cImages.push($("#cover2 > img").attr("src")),""!==e&&a.cImages.push($("#cover3 > img").attr("src")),""!==f&&a.cImages.push($("#cover4 > img").attr("src")),d.saveCImgs(JSON.stringify(a.cImages)).success(function(b){swal("great!",b.message,"success"),a.cImages=[],a.userInfo()}).error(function(a){swal("Oops!",a.message,"warning")})},a.removeImage=function(b){swal({title:"Are you sure?",text:"Are you sure you want to remove this image?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Remove",closeOnConfirm:!1},function(){d.removeimage(b).success(function(){var c=a.cimages.indexOf(b);c>-1&&a.cimages.splice(c,1),swal("great!","image was removed successfully","success"),a.userInfo()}).error(function(a){swal("",a.message,"warning")})})}};angular.module("cover",[]).controller("coverController",["$scope","auth","$state","user",a])}(),function(){var a=function(a,b,c,d){a.isLoggedIn=b.isLoggedIn,a.addFriend=function(){a.isLoadingFrnd=!0,d.addfriend(a.username).success(function(){swal("great!","Friend request sent successfully","success"),a.isLoadingFrnd=!1}).error(function(b){swal("",b.message,"error"),a.isLoadingFrnd=!1})},a.unFriend=function(){swal({title:"Are you sure?",text:a.username+" will no longer be your friend",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"f"===a.gender?"Yes, unfriend her":"Yes, unfriend him",closeOnConfirm:!1},function(){a.isLoadingFrnd=!0,d.unfriend(a.username).success(function(b){swal("Unfriended!","You're no longer a friend of "+a.username,"success"),a.isFriend=!1,a.isLoadingFrnd=!1}).error(function(b){swal("",b.message,"error"),a.isLoadingFrnd=!1})})},a.blockUser=function(){swal({title:"Are you sure?",text:a.username+" will not be able to view your profile",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"f"===a.gender?"Yes, block her":"Yes, block him",closeOnConfirm:!1},function(){a.isLoadingBlked=!0,d.blockuser(a.username).success(function(b){swal("great!","You've successfully blocked "+a.username,"success"),a.isLoadingBlked=!1,a.isBlocked=!0}).error(function(b){swal("",b.message,"error"),a.isLoadingBlked=!1})})},a.unblockUser=function(){a.isLoadingBlked=!0,d.unblockuser(a.username).success(function(b){swal("","You've successfully unblocked "+a.username,"success"),a.isLoadingBlked=!1,a.isBlocked=!1}).error(function(b){swal("",b.message),a.isLoadingBlked=!1})}};angular.module("request",[]).controller("requestController",["$scope","auth","$state","user",a])}(),function(){var a=function(a,b,c,d,e,f,g,h,i){a.isLoggedIn=b.isLoggedIn,g.statusVariables(a,5,!0,"hot"),a.name=i.username,a.getAllHott=function(){g.statusVariables(a,5,!0,"hot"),a.hotUserContent()},a.hotUserContent=function(){h.getUserHot(a.limit,a.name).success(function(b){g.successfunc(a,"h",b)}).error(function(b){g.errorfunc(a,b)})},a.hotUserContent(),a.getAllNewt=function(){g.statusVariables(a,5,!0,"new"),a.newUserContent()},a.newUserContent=function(){h.getUserNew(a.limit,a.name).success(function(b){
g.successfunc(a,"n",b)}).error(function(b){g.errorfunc(a,b)})},a.getAllCont=function(b){g.statusVariables(a,5,!0,"con"),a.cv=b,a.conUserContent(a.cv)},a.conUserContent=function(b){h.getUserCon(a.limit,b.value,a.name).success(function(b){g.successfunc(a,"c",b)}).error(function(b){g.errorfunc(a,b)})},a.getAllTopt=function(b){g.statusVariables(a,5,!0,"top"),a.tv=b,a.topUserContent(a.tv)},a.topUserContent=function(b){h.getUserTop(a.limit,b.value,a.name).success(function(b){g.successfunc(a,"t",b)}).error(function(b){g.errorfunc(a,b)})},a.getAllsavedt=function(){g.statusVariables(a,5,!0,"saved"),a.SavedUserContent()},a.SavedUserContent=function(){h.getUserSaved(a.limit,a.name).success(function(b){g.successfunc(a,"s",b)}).error(function(b){g.errorfunc(a,b)})},a.loadmore=function(b){a.mload=!0,"hot"===b?a.hotUserContent():"new"===b?a.newUserContent():"con"===b?a.conUserContent(a.cv):"top"===b&&a.topUserContent(a.tv)},g.subAlt(a,d,f)};angular.module("room",[]).config(["$stateProvider",function(a){a.state("u.room",{url:"/room",templateUrl:"partials/logged/userprofile/room.html",controller:"roomController"})}]).controller("roomController",["$scope","auth","$rootScope","vote","taah","postedtimes","msub","sub","$stateParams",a])}(),function(){var a=function(a,b,c,d){a.isLoggedIn=b.isLoggedIn,a.limit=5,a.nofriends=!1,a.friends=d.getFriends(a.username,a.limit,a),a.getMorefriends=function(){a.load=!0,a.friends=d.getFriends(a.username,a.friends.limit,a),a.load=!1}};angular.module("friends",[]).config(["$stateProvider",function(a){a.state("u.friends",{url:"/friends",templateUrl:"partials/logged/userprofile/friends.html",controller:"friendsController"})}]).controller("friendsController",["$scope","auth","$rootScope","user",a])}(),function(){var a=function(a,b,c){a.isLoggedIn=b.isLoggedIn,a.Allposts=[]};angular.module("about",[]).config(["$stateProvider",function(a){a.state("u.about",{url:"/about",templateUrl:"partials/logged/userprofile/about.html",controller:"aboutController"})}]).controller("aboutController",["$scope","auth","$rootScope",a])}(),function(){var a=function(a,b,c){a.isLoggedIn=b.isLoggedIn,a.Allposts=[]};angular.module("more",[]).config(["$stateProvider",function(a){a.state("u.more",{url:"/more",templateUrl:"partials/logged/userprofile/more.html",controller:"moreController"})}]).controller("moreController",["$scope","auth","$rootScope",a])}(),function(){var a=function(a,b,c,d,e,f,g,h){function i(){a.isProcessing=!1,a.lloading=!1,a.ploading=!1,a.taahloading=!1}function j(){$("#textinput").val(""),$("#ptitle").val(""),$("#linkinput").val(""),$("#ltitle").val("")}function k(){$("#taahname").val(""),$("#taahdesc").val(""),$("#taahtype").val(""),$("#taahtitle").val(""),a.taahloading=!1}a.isLoggedIn=b.isLoggedIn,a.isProcessing=!1,a.limit=5,b.isLoggedIn()&&(e.getUserTaahs(a).success(function(b){a.taahs=b.subscribtions,f.$broadcast("get-user-taahs",{taahs:a.taahs})}).error(function(b){a.taahs=b}),g.getAllTaahs().success(function(b){a.alltaahs=b.taahs}).error(function(b){a.alltaahs=b}),a.friends=d.getFriends(b.currentUser().username,a.limit,a)),a.populateTah=function(a){$("#tahinput").val(a)},a.populateLTah=function(a){$("#linktah").val(a)},a.SubmitPost=function(b,c){a.isProcessing=!0,a.ploading=!0,"main"==c&&(c=$("#tahinput").val()),""===c?(swal("","You must select a taah","warning"),i()):e.makePost(b,c).success(function(a){swal("","submission was a success","success"),j(),i()}).error(function(a){swal("",a.message,"warning"),j(),i()})},a.SubmitLink=function(b,c){a.isProcessing=!0,a.lloading=!0,"main"==c&&(c=$("#linktah").val()),""===c?(swal("","You must select a taah","warning"),i()):e.newLink(b,c).success(function(a){swal("","submission was a success","success"),j(),i()}).error(function(a){swal("",a.message,"warning"),j(),i()})},a.CreateTaah=function(b,c){b&&(a.isProcessing=!0,a.taahloading=!0,g.createTaah(c).success(function(a){f.$broadcast("add-to-taah",{taahname:a.name}),swal("","taah was created successfully","success"),i(),k()}).error(function(a){i()}))},a.EditTaah=function(b,c,d,e){return a.isProcessing=!0,a.taahloading=!0,""===e||void 0===e?(swal("","Choose content option","warning"),i(),!1):""===b||void 0===b?(swal("","Title is required","warning"),i(),!1):""===d||void 0===d?(swal("","Choose a type","warning"),i(),!1):void g.editTaah(b,c,d,e,a.id).success(function(b){a.type=b.type,a.coption=b.contentOption,a.title=b.title,a.description=b.Description,i(),swal("","Update was a success","success")}).error(function(a){return swal("",a.message,"warning"),i(),!1})},a.subscribeTaah=function(){g.subscribeNow(a.name).success(function(b){b.success&&!b.re?(swal("",b.message,"success"),a.member=!0,a.numOfUsers++,a.taahs.push({name:a.name})):b.success&&b.re?swal("","Your subscription is waiting approval","success"):swal("",b.message,"warning")}).error(function(a){swal("",a.message,"error")})},a.unsubscribeTaah=function(){g.unsubscribeNow(a.name).success(function(b){b.success?(swal("",b.message,"success"),a.numOfUsers--):swal("",b.message,"warning"),a.member=!1}).error(function(a){swal("",a.message,"error")})},a.InviteFriends=function(){f.$broadcast("invite-friends")},a.createATaah=function(a){h.fulldialog(a,"makePostController","partials/templates/mobile/createTaah.mob.html")},a.showInvites=function(a){h.fulldialog(a,"makePostController","partials/templates/mobile/inviteFrnds.mob.html")},a.showSubscribers=function(a){h.fulldialog(a,"taahController","partials/templates/mobile/subscribers.mob.html")},a.ShowEditTaah=function(a){h.fulldialog(a,"taahController","partials/templates/mobile/editTaah.mob.html")},h.scopeOnly(a)};angular.module("makePost",[]).controller("makePostController",["$scope","auth","$state","user","sub","$rootScope","taah","msub",a])}(),function(){"use strict";var a=function(a,b,c,d,e,f,g,h){function i(a,b,c,d){b.id===c&&b.childs.push(d),b.childs!==[]&&angular.forEach(b.childs,function(a){i(b.childs,a,c,d)})}a.isLoggedIn=b.isLoggedIn,a.cposts=[],b.allInfo().success(function(b){b.completeprofile?a.luname=b.username:c.go("comprofile.pInfo")}).error(function(a){}),f.$broadcast("complete-process",{completeprocess:!1}),a.submission=function(){e.getSubmission(g.id).success(function(b){a.id=b.id,a.osid=b.osid,a.author=b.author,a.anonymous=b.anonymous,a.type=b.type,a.ptype=b.ptype,a.title=b.title,a.data=b.data,a.link=b.link,a.taah=b.taah,a.up=b.up,a.down=b.down,a.postdate=b.postdate,a.avatar=b.avatar,a.userVoted=b.userVoted,a.voteStatus=b.voteStatus,a.comments=b.comments,a.saved=b.saved,a.thumb=b.thumb,a.hasreplies=!0}).error(function(){c.go("homepage")})},a.submission(),a.getComments=function(){e.getcomments(g.id).success(function(b){a.hasreplies=!0,angular.forEach(b,function(b){a.cposts.push(b)})}).error(function(b){a.hasreplies=!1})},a.getComments(),a.isData=!0,a.showdata=function(){a.isdata=!a.isdata},a.upVotePost=function(b,c){h.upvotes(b,a,c,a.hot="",a.new="",a.con="",a.top="",a.ussubs="")},a.downVotePost=function(b,c){h.downvotes(b,a,c,a.hot="",a.new="",a.con="",a.top="",a.ussubs="")},a.SavePost=function(b,c){h.save(b,c,a,a.new="",a.con="",a.top="",a.ussubs="")},a.unSavePost=function(b,c){h.unsave(b,c,a,a.new="",a.con="",a.top="",a.ussubs="")},a.mainReply=function(b){return""===b.text?(swal("","fill the form data","warning"),!1):(a.isProcessing=!0,a.mrload=!0,void e.replymsub(b,a.id).success(function(c){$("#replytext").val(""),a.mrload=!1,a.isProcessing=!1,a.hasreplies=!0,b.text="",a.cposts.push(c)}).error(function(b){swal("",b.msg,"warning"),a.mrload=!1,a.isProcessing=!1,a.hasreplies=!1}))},a.showSubReply=function(a){$("#subrep_"+a).show()},a.dismissForm=function(a){$("#subrep_"+a).hide(),$("#replytext_"+a).val("")},a.makeSubPost=function(b,c){return""===$("#replytext_"+c).val()?(swal("","fill the form data","warning"),!1):(a.isProcessing=!0,a.srloading=!0,void e.replyssub(b,a.id,c).success(function(b){$("#replytext_"+c).val(""),$("#subrep_"+c).hide(),a.isProcessing=!1,a.srloading=!1,angular.forEach(a.cposts,function(d){i(a.cposts,d,c,b)})}).error(function(){swal("",data.msg,"warning"),a.isProcessing=!1,a.srloading=!1}))},a.removecomment=function(b,c,d){swal({title:"",text:"Are you sure you want to remove this comment?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Remove",closeOnConfirm:!1},function(){h.remove(b,c,d,a.cposts,a.mm="",g.id,a.top="",a.ussubs="")})}};angular.module("comments",[]).config(["$stateProvider",function(a){a.state("comments",{url:"/comments/:id",templateUrl:"partials/logged/subs/comments.html",controller:"commentsController",onEnter:["$state","auth",function(a,b){b.isLoggedIn()||a.go("login")}]})}]).controller("commentsController",["$scope","auth","$state","user","sub","$rootScope","$stateParams","vote",a])}(),function(){"use strict";var a=function(a,b,c,d,e,f,g,h,i,j,k){a.isLoggedIn=b.isLoggedIn,a.limit=5,b.allInfo().success(function(b){b.completeprofile?(a.luname=b.username,a.username=b.username):c.go("comprofile.pInfo")}).error(function(a){}),f.$broadcast("complete-process",{completeprocess:!1}),a.getTaahbyname=function(){i.gettaahbyname(g.name).success(function(b){a.id=b.id,a.name=b.name,a.type=b.type,a.coption=b.coption,a.title=b.title,a.description=b.Description,a.creator=b.creator,a.numOfUsers=b.numOfUsers,a.logo=b.logo,a.date=b.createddate,a.member=b.member,a.restricted=b.restricted,a.resInfo=b.resInfo,a.admin=b.admin,"pr"==a.type&&a.member===!1&&c.go("homepage")}).error(function(){c.go("homepage")}),"pr"==a.type&&a.member===!1&&c.go("homepage")},a.getTaahbyname(),k.statusVariables(a,5,!0,"hot"),a.getAllHott=function(){k.statusVariables(a,5,!0,"hot"),a.hotTaahContent()},a.hotTaahContent=function(){e.getTaahHot(a.limit,g.name).success(function(b){k.successfunc(a,"h",b)}).error(function(b){k.errorfunc(a,b)})},a.hotTaahContent(),a.getAllNewt=function(){k.statusVariables(a,5,!0,"new"),a.newTaahContent()},a.newTaahContent=function(){e.getTaahNew(a.limit,g.name).success(function(b){k.successfunc(a,"n",b)}).error(function(b){k.errorfunc(a,b)})},a.getAllCont=function(b){k.statusVariables(a,5,!0,"con"),a.cv=b,a.conTaahContent(a.cv)},a.conTaahContent=function(b){e.getTaahCon(a.limit,b.value,g.name).success(function(b){k.successfunc(a,"c",b)}).error(function(b){k.errorfunc(a,b)})},a.getAllTopt=function(b){k.statusVariables(a,5,!0,"top"),a.tv=b,a.topTaahContent(a.tv)},a.topTaahContent=function(b){e.getTaahTop(a.limit,b.value,g.name).success(function(b){k.successfunc(a,"t",b)}).error(function(b){k.errorfunc(a,b)})},a.loadmore=function(b){a.mload=!0,"hot"===b?a.hotTaahContent():"new"===b?a.newTaahContent():"con"===b?a.conTaahContent(a.cv):"top"===b&&a.topTaahContent(a.tv)},k.subAlt(a,h,j),k.sideNav(a)};angular.module("taah",[]).config(["$stateProvider",function(a){a.state("t",{url:"/t/:name",templateUrl:"partials/logged/taah/taah.html",controller:"taahController",onEnter:["$state","auth",function(a,b){b.isLoggedIn()||a.go("login")}]})}]).controller("taahController",["$scope","auth","$state","user","sub","$rootScope","$stateParams","vote","taah","postedtimes","msub",a])}(),function(){"use strict";var a=function(a,b,c,d,e,f,g,h){a.limit=5,a.isLoggedIn=b.isLoggedIn,a.nofriends=!1,a.selection=[],a.selection2=[],a.$on("invite-friends",function(){a.inviteLoading=!0,a.friends=f.getFriends(a.luname,a.limit,a),a.inviteLoading=!1}),a.loadMorefriends=function(){a.load=!0,a.friends=f.getFriends(b.currentUser().username,a.friends.limit,a),a.load=!1},a.toggleSelection=function(b){a.toggle(b,a.selection)},a.toggleSelection2=function(b){a.toggle(b,a.selection2)},a.toggle=function(b,c){var d=c.indexOf(b);d>-1?c.splice(d,1):c.push(b),a.selectionId=[],angular.forEach(c,function(b){a.selectionId.push(b)})},a.InviteNow=function(){a.selection<1?swal("","You've not selected any person","warning"):e.InviteFrnds(JSON.stringify(a.selectionId),g.name).success(function(a){swal("",a.message,"success")}).error(function(a){swal("",a.message,"warning")}),console.log(a.selectionId)},a.InviteFriend=function(){a.selection2<1?swal("","You've not selected any taah","warning"):e.inviteFrnd(JSON.stringify(a.selectionId),g.username).success(function(a){swal("",a.message,"success")}).error(function(a){swal("",a.message,"warning")}),console.log(a.selectionId)},a.AcceptSub=function(a){$("#"+a+"_btns").hide(),$("#"+a+"_load").show(),e.acceptSub(a,g.name).success(function(b){$("#"+a+"_d").hide(),$("#"+a+"_load").hide(),$("#"+a+"_acpt").show()}).error(function(a){})},a.IgnoreSub=function(a){$("#"+a+"_btns").hide(),$("#"+a+"_load").show(),e.ignoreSub(a,g.name).success(function(b){$("#"+a+"_d").hide(),$("#"+a+"_load").hide(),$("#"+a+"_rjct").show()}).error(function(a){})},h.scopeOnly(a)};angular.module("invite").controller("InviteController",["$scope","auth","$rootScope","sub","taah","user","$stateParams","msub",a])}(),function(){var a=function(a,b,c,d,e,f,g,h,i){a.isLoggedIn=b.isLoggedIn,c.$broadcast("complete-process",{completeprocess:!1}),b.allInfo().success(function(a){a.completeprofile?a.school.ug||d.go("homepage"):d.go("comprofile.pInfo")}),a.SchUsers=f,g.getAlldpts().success(function(b){a.depts=[{name:"All",id:"1",_id:"1"}],a.depts=a.depts.concat(b)}),g.getAllhlls().success(function(b){a.halls=[{name:"All",id:"1",_id:"1"}],a.halls=a.halls.concat(b)}),a.levels=h.lvl(),a.genders=h.gender(),a.$on("dictloading",function(b,c){a.dictloading=c.dictloading}),a.$on("selectA-hasStd",function(b,c){a.dictloading=c.dictloading,a.SchUsers=c.SchUsers}),a.$on("selectA-noStd",function(b,c){a.dictloading=c.dictloading,a.SchUsers=c.SchUsers}),i.sideNav(a)};a.resolve={SchUsers:["dict",function(a){return a.getAllUgStudents().then(function(a){return a.data.students?{data:a.data.ugstd,isStudent:a.data.students}:{data:a.data.message,isStudent:a.data.students}})}]},angular.module("dictionary",["dfilter"]).config(["$stateProvider",function(b){b.state("wontahdict",{url:"/wontahdict",templateUrl:"partials/logged/dictionary/wontahdict.html",controller:"dictionaryController",resolve:a.resolve,onEnter:["$state","auth",function(a,b){b.isLoggedIn()||a.go("login")}]})}]).controller("dictionaryController",["$scope","auth","$rootScope","$state","dict","SchUsers","user","opt","msub",a])}(),function(){"use strict";var a=function(a,b,c,d,e){function f(a){void 0===a&&(a="1")}a.isLoggedIn=b.isLoggedIn,a.filters=!1,a.showFilters=function(){a.filters=!0},a.options=e.options(),a.SelectOption=function(b,c){var d;console.log(b.name),"Department"===b.name?d=a.depts:"Hall"===b.name?d=a.halls:"Level"===b.name?d=a.levels:"Gender"===b.name?d=a.genders:"All"===b.selectA&&(d=""),"selectA"===c?(a.t1=b.value,a.optionsA=d,a.itm1=void 0,console.log(a.optionsA),a.options1=[{name:"All"}],a.options2=[],a.options3=[],a.optionsB=[],a.optionsC=[],a.optionsD=[],a.filterNow(a.options,a.options1,b)):"selectB"===c?(a.t2=b.value,a.itm2=void 0,a.optionsB=d,a.options2=[{name:"All"}],a.options3=[],a.optionsC=[],a.optionsD=[],a.filterNow(a.options1,a.options2,b)):"selectC"===c?(a.t3=b.value,a.itm3=void 0,a.optionsC=d,a.optionsD=[],a.options3=[{name:"All"}],a.filterNow(a.options2,a.options3,b)):"selectD"===c&&(a.t4=b.value,a.optionsD=d,a.itm4=void 0)},a.SelectA=function(b){a.loadN(),a.itm1=void 0===b._id?1:b._id,c.FirstFilter(a.itm1,a.t1).then(function(b){b.data.students?(a.optionsB=[],a.optionsC=[],a.optionsD=[],a.isStudentN(b.data.ugstd)):a.isNotStudentN()})},a.SelectB=function(b){a.loadN(),a.itm2=void 0===b._id?1:b._id,f(a.itm2),c.SecondFilter(a.itm1,a.t1,a.itm2,a.t2).then(function(b){b.data.students?(a.optionsC=[],a.optionsD=[],a.isStudentN(b.data.ugstd)):a.isNotStudentN()})},a.SelectC=function(b){a.loadN(),a.itm3=void 0===b._id?1:b._id,f(a.itm3),c.ThirdFilter(a.itm1,a.t1,a.itm2,a.t2,a.itm3,a.t3).then(function(b){b.data.students?(a.optionsD=[],a.isStudentN(b.data.ugstd)):a.isNotStudentN()})},a.SelectD=function(b){d.$broadcast("dictloading",{dictloading:!0}),a.itm4=void 0===b._id?1:b._id,f(a.itm4),c.FourthFilter(a.itm1,a.t1,a.itm2,a.t2,a.itm3,a.t3,a.itm4,a.t4).then(function(b){b.data.students?a.isStudentN(b.data.ugstd):a.isNotStudentN()})},a.loadN=function(){d.$broadcast("dictloading",{dictloading:!0})},a.isStudentN=function(a){d.$broadcast("selectA-hasStd",{dictloading:!1,SchUsers:{isStudent:!0,data:a}})},a.isNotStudentN=function(){d.$broadcast("selectA-noStd",{dictloading:!1,SchUsers:{isStudent:!1}})},a.filterNow=function(a,b,c){angular.forEach(a,function(a){a.name!==c.name&&"All"!==a.name&&b.push(a)})}};angular.module("dfilter",[]).controller("filterController",["$scope","auth","dict","$rootScope","opt",a])}(),function(){var a=function(a,b,c,d,e,f,g,h){a.isLoggedIn=b.isLoggedIn,a.pmload=!1,a.isInboxOpen=!1,a.isProcessing=!1,c.$broadcast("complete-process",{completeprocess:!1}),b.allInfo().success(function(b){b.completeprofile?a.luname=b.username:d.go("comprofile.pInfo")}).error(function(a){}),a.fullscreen=!1,a.FullScreenToggle=function(){a.fullscreen=!a.fullscreen},a.p={},e.getallUsers().success(function(b){a.p.options=b}),a.form={},a.htmlcontent=a.orightml,a.disabled=!1,a.notshown=!0,a.showTextBar=function(){a.notshown?($(".ta-toolbar .btn-group").show(),a.notshown=!1):($(".ta-toolbar .btn-group").hide(),a.notshown=!0)},a.SaveinboxMessage=function(b,c){a.pmload=!0,""===c||void 0===c?a.doneMsg("Recipient not select","warning"):""===b||void 0===b?a.doneMsg("Title required","warning"):a.luname===c?a.doneMsg("You cannot send message to your self","warning"):(a.msg=f($("#messagebox").val()),g.sendMessage(c,b,a.msg).success(function(b){$("#to").val(""),$("#subject").val(""),$("#messagebox").val(""),$(".ta-editor").val(""),$(".ta-editor").html(""),a.isInboxOpen=!1,a.doneMsg("message was sent successfully","success")}).error(function(b){a.doneMsg(b.message,"error")}))},a.doneMsg=function(b,c){return swal("",b,c),a.pmload=!1,a.isProcessing=!1,!1},a.$on("mark-as-read",function(){a.unreadCnt--}),a.$on("new-message-check",function(b,c){a.unreadCnt=c.unreadcnt}),h.sideNav(a),a.messageModal=function(a){h.fulldialog(a,"msgController","partials/templates/mobile/msg.mob.html")},h.scopeOnly(a)};angular.module("message",["sentmsg","received","notifications","onemsg","textAngular"]).config(["$stateProvider",function(a){a.state("pm",{url:"/pm",templateUrl:"partials/logged/message/message.html",controller:"msgController",onEnter:["$state","auth",function(a,b){b.isLoggedIn()||a.go("login")}]})}]).controller("msgController",["$scope","auth","$rootScope","$state","user","$sanitize","inbox","msub",a])}(),function(){"use strict";var a=function(a,b,c,d,e){a.isLoggedIn=b.isLoggedIn,d.getSentMsgs().then(function(b){b.data.noMessages?(a.unread="0",a.newmsg="0",a.allmsg="0"):(a.unread=b.data.msgCount,a.newmsg="1",a.msg=b.data.result)}),a.MsgBody=function(b,d){angular.forEach(a.msg,function(a,d){if(a.id===b)return c.$broadcast("new-message-body",{mbody:a}),e.go("pm.mbody",{msgid:b}),!1})}};angular.module("sentmsg",[]).config(["$stateProvider",function(a){a.state("pm.sent",{url:"/sent",templateUrl:"partials/logged/message/sent.html",controller:"sentController"})}]).controller("sentController",["$scope","auth","$rootScope","inbox","$state",a])}(),function(){"use strict";var a=function(a,b,c,d,e){a.isLoggedIn=b.isLoggedIn,c.getReceivedMsgs().then(function(b){b.data.noMessages?(a.unread="0",a.newmsg="0",a.allmsg="0"):(a.unread=b.data.msgCount,a.newmsg="1",a.msg=b.data.result),d.$broadcast("new-message-check",{unreadcnt:a.unread})}),a.MsgBody=function(b,f){c.markasRead(b,f).then(function(a){a.data.numark&&d.$broadcast("mark-as-read")}),angular.forEach(a.msg,function(a,c){if(a.id===b)return d.$broadcast("new-message-body",{mbody:a}),e.go("pm.mbody",{msgid:b}),!1})}};angular.module("received",[]).config(["$stateProvider",function(a){a.state("pm.received",{url:"/received",templateUrl:"partials/logged/message/received.html",controller:"receivedController"})}]).controller("receivedController",["$scope","auth","inbox","$rootScope","$state",a])}(),function(){"use strict";var a=function(a,b,c,d,e){a.isLoggedIn=b.isLoggedIn,a.rloading=!1,d.getMessageBody(c.msgid).success(function(b){a.id=b.id,a.message=b.message,a.sender=b.sender,a.receiver=b.receiver,a.senttime=b.senttime,a.subject=b.subject,a.sdelete=b.sdelete,a.rdelete=b.rdelete,a.parent=b.parent,a.hasreplies=b.hasreplies,a.s_unseen=b.s_unseen,a.r_unseen=b.r_unseen,a.replies=b.replies,a.receiver!==a.luname&&a.sender!==a.luname&&e.go("pm.received")}).error(function(){a.noMessages=!0,e.go("pm.received")}),a.$on("new-message-body",function(b,c){a.bmsg=c.mbody}),a.ReplyMsg=function(b){d.replymsg(a.sender,b,c.msgid).then(function(b){b.data.isError?swal("",b.data.msg,"warning"):(a.replies.push(b.data),$("#replytext").val(""))})},a.deleteReply=function(b,c){swal({title:"Are you sure?",text:"Are you sure you want to remove message?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Remove",closeOnConfirm:!1},function(){d.deletereply(b).success(function(){a.replies.splice(c,1),swal("","You've successfully removed this reply","success")})})},a.deleteMessage=function(){swal({title:"Are you sure?",text:"Are you sure you want to remove message and its replies?",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Remove",closeOnConfirm:!1},function(){d.deletemessage(a.id,a.sender).success(function(){swal("","You've successfully removed this message and its replies","success"),e.go("pm.received")})})}};angular.module("onemsg",[]).config(["$stateProvider",function(a){a.state("pm.mbody",{url:"/mbody/:msgid",templateUrl:"partials/logged/message/oneMsg.html",controller:"mbodyController"})}]).controller("mbodyController",["$scope","auth","$stateParams","inbox","$state",a])}(),function(){"use strict";var a=function(a,b,c){a.isLoggedIn=b.isLoggedIn};angular.module("notifications",[]).config(["$stateProvider",function(a){a.state("pm.notifications",{url:"/notifications",templateUrl:"partials/logged/message/notif.html",controller:"notificationsController"})}]).controller("notificationsController",["$scope","auth","inbox",a])}(),function(){var a=function(a,b,c,d,e){a.isLoggedIn=b.isLoggedIn,c.$broadcast("complete-process",{completeprocess:!1}),b.allInfo().success(function(b){b.completeprofile?(a.luname=b.username,a.lavatar=b.avatar):d.go("comprofile.pInfo")}),e.sideNav(a)};angular.module("settings",["cavatar","cbasic","cpass","cschinfo"]).config(["$stateProvider",function(a){a.state("settings",{url:"/settings",templateUrl:"partials/logged/settings/settings.html",controller:"settingsController",onEnter:["$state","auth",function(a,b){b.isLoggedIn()||a.go("login")}]})}]).controller("settingsController",["$scope","auth","$rootScope","$state","msub",a])}(),function(){"use strict";var a=function(a,b){a.isLoggedIn=b.isLoggedIn},b=function(a,b,c){var d=$(".upload-avatar");a.uploaded=!1;var e;a.acceptTypes="image/jpeg,image/png,image/gif",a.uploadData={myformdata:"hello world"},a.onUpload=function(a){d.text("Uploading"),e=window.setInterval(function(){var a=d.text();a.length<13?d.text(a+"."):d.text("Uploading")},200)},a.onError=function(b){d.text("Change profile picture"),window.clearInterval(e),a.responseData=b.data},a.onComplete=function(b){window.clearInterval(e),d.text("Change profile picture"),a.filename=b.data.file,a.obj={},a.obj.src="uploads/"+a.filename,a.obj.selection=[76,3,523,450,447,447],a.obj.thumbnail=!0,a.uploaded=!0,$("#crop-section").show(),$("#uploader-section").hide()},a.isProcessing=!1,a.loading=!1,a.SaveCrop=function(){a.isProcessing=!0,a.loading=!0,b.saveCrop(a.obj.selection,a.filename).success(function(b){a.user=JSON.parse(localStorage["user-t"]),a.user.avatar=b.image,localStorage.setItem("user-t",JSON.stringify(a.user)),c.go("u",{username:a.luname});var d=$(".avatar");d.attr("src","/user/"+a.luname+"/"+b.image),d.addClass("avatar"),a.isProcessing=!1,a.loading=!1}).error(function(){a.isProcessing=!1,a.loading=!1}),console.info(a.obj.selection),a.uploaded=!1}};angular.module("cavatar",[]).config(["$stateProvider",function(a){a.state("settings.avatar",{url:"/avatar",templateUrl:"partials/logged/settings/avatar/avatar.html",controller:"cavatarController"})}]).config(["ngJcropConfigProvider",function(a){a.setJcropConfig("upload",{bgColor:"black",bgOpacity:.4,aspectRatio:1,maxWidth:600,maxHeight:450})}]).controller("cavatarController",["$scope","auth",a]).controller("AppCtrl",["$scope",function(a){a.responseData=void 0}]).controller("AdvancedMarkupCtrl",["$scope","auth","$state",b])}(),function(){"use strict";var a=function(a,b,c){a.isLoggedIn=b.isLoggedIn,a.loading=!1,a.isProcessing=!1,b.allInfo().success(function(b){b.completeprofile?(a.luname=b.username,a.lfname=b.firstname,a.llname=b.lastname,a.lcontact=b.contact,a.lweb=b.website,a.lbio=b.bio,a.g=b.gender,"f"===b.gender?a.gender="Female":a.gender="Male"):c.go("comprofile.pInfo")}),a.SubmitPform=function(c){a.loading=!0,a.isProcessing=!0,""===$("#firstname").val()&&a.successFunc("Firstname required","warning"),""===$("#lastname").val()&&a.successFunc("Lastname required","warning"),""!==c&&void 0!==c||(c=a.g);var d={firstname:$("#firstname").val(),lastname:$("#lastname").val(),contact:$("#contact").val(),website:$("#website").val(),bio:$("#bio").val(),gender:c};console.log(d),b.pInfo(d).success(function(b){a.successFunc("You've successfully updated your personal info","success")}).error(function(b){a.lfname=b.firstname,a.llname=b.lastname,a.lcontact=b.contact,a.lweb=b.website,a.lbio=b.bio,a.successFunc(b.message,"error")}),a.successFunc=function(b,c){return a.loading=!1,a.isProcessing=!1,swal("",b,c),!1}},a.SubmitPform1=function(c,d,e,f,g,h){a.loading=!0,a.isProcessing=!0,""!==c&&void 0!==c||a.successFunc("Firstname required","warning"),""!==d&&void 0!==d||a.successFunc("Lastname required","warning"),""!==h&&void 0!==h||(h=a.g);var i={firstname:c,lastname:d,contact:e,website:f,bio:g,gender:h};console.log(i),b.pInfo(i).success(function(b){a.successFunc("You've successfully updated your personal info","success")}).error(function(b){a.lfname=b.firstname,a.llname=b.lastname,a.lcontact=b.contact,a.lweb=b.website,a.lbio=b.bio,a.successFunc(b.message,"error")}),a.successFunc=function(b,c){return a.loading=!1,a.isProcessing=!1,swal("",b,c),!1}}};angular.module("cbasic",[]).config(["$stateProvider",function(a){a.state("settings.basic",{url:"/settings",templateUrl:"partials/logged/settings/basicInfo/basicInfo.html",controller:"basicController"})}]).controller("basicController",["$scope","auth","$state",a])}(),function(){"use strict";var a=function(a,b){a.isLoggedIn=b.isLoggedIn,a.passloading=!1,a.isProcessing=!1,a.ChangePass=function(c){a.passloading=!0,a.isProcessing=!0,b.changePass(c).success(function(){a.finishFunc("Password was changed successfully","success")}).error(function(b){a.finishFunc(b.message,"error")}),a.finishFunc=function(b,c){a.passloading=!1,a.isProcessing=!1,swal("",b,c),$("#oldpass").val(""),$("#newpass1").val(""),$("#newpass2").val("")}}};angular.module("cpass",[]).config(["$stateProvider",function(a){a.state("settings.pass",{url:"/pass",templateUrl:"partials/logged/settings/cpass.html",controller:"passController"})}]).controller("passController",["$scope","auth",a])}(),function(){"use strict";var a=function(a,b,c,d){a.isLoggedIn=b.isLoggedIn,a.goNext=!1,a.isStudent=!1,a.isStudentOfUg=!0,a.isProcessing=!1,a.selection=[],a.isLoggedIn=b.isLoggedIn,a.depts=c.getAllDepts(a),a.halls=c.getAllHalls(a),a.NotStudent=function(){a.schoolInfo={status:!1},a.saveSubmission(a.schoolInfo)},a.StudentofUg=function(){a.isStudent=!0,a.isStudentOfUg=!0},a.NotStudentofUg=function(){a.isStudent=!0,a.isStudentOfUg=!1},a.SubmitNotUgStudent=function(b){a.sch=""===b||void 0===b?"null":b,a.schoolInfo={status:!0,ug:!1,name:a.sch},a.saveSubmission(a.schoolInfo)},a.toggleSelection=function(b){var c=a.selection.indexOf(b);c>-1?a.selection.splice(c,1):a.selection.push(b),a.selectionId=[],angular.forEach(a.selection,function(b){a.selectionId.push(b._id)})},a.$on("dept-info",function(b,c){a.selection=c.selection,a.selectionId=c.selectionId}),a.SubmitUgStudent=function(b,c){console.info(b),void 0===b||void 0===b.hall||""===b.hall?swal("","Hall not selected","warning"):void 0===b||void 0===b.level||""===b.level?swal("","Level not selected","warning"):a.selection<1?swal("","Department not selected","warning"):("desktop"===c?a.hId=b.hall._id:"mobile"===c&&(a.hId=JSON.parse(b.hall)._id),a.schoolInfo={status:!0,ug:!0,name:"University of Ghana",level:b.level,hall:a.hId,department:a.selectionId},a.saveSubmission(a.schoolInfo))},a.saveSubmission=function(c){a.isProcessing=!0,a.sloading=!0,b.SchInfo(c).success(function(){a.successFunc("You've successfully updated your school info","success"),a.$broadcast("userprofile-credentials")}).error(function(b){a.successFunc(b.message,"error")}),a.successFunc=function(b,c){return a.sloading=!1,a.isProcessing=!1,swal("",b,c),!1}},a.showDeptDialog=function(a){d.fulldialog(a,"deptCtrl","partials/templates/mobile/dept.mob.html")}};angular.module("cschinfo",[]).config(["$stateProvider",function(a){a.state("settings.sch",{url:"/sch",templateUrl:"partials/logged/settings/schInfo/schinfo.html",controller:"cschController"})}]).controller("cschController",["$scope","auth","user","msub",a])}(),function(){var a=function(a,b,c,d,e){a.isLoggedIn=b.isLoggedIn,a.pageSize=5,a.currentPage=1,a.allusers=[],a.allusers.members={},d.$broadcast("complete-process",{completeprocess:!1}),b.allInfo().success(function(b){b.completeprofile?(a.luname=b.username,a.lavatar=b.avatar):c.go("comprofile.pInfo")}),b.getAllMembers().success(function(b){a.allusers=b}).error(function(){c.go("homepage")}),b.getSuggestions().success(function(b){a.suggestions=b}),a.p={},e.getallUsers().success(function(b){a.p.options=b}),a.AddAdmin=function(b){swal({title:"",text:"Are you sure you want to add "+b.username+" as an admin",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Yes",closeOnConfirm:!1},function(){e.addadmin(b.username).success(function(c){swal("","admin was added successfully","success"),angular.forEach(a.allusers.members,function(a){b.username===a.username&&(a.level="d")})}).error(function(a){swal("",a.message,"error")})})},a.RemoveAdmin=function(b,c){swal({title:"",text:"Are you sure you want to remove "+c+" as an admin",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Yes",closeOnConfirm:!1},function(){e.removeadmin(b).success(function(c){swal("","admin was removed successfully","success"),angular.forEach(a.allusers.members,function(a){b===a.id&&(a.level="a")})}).error(function(a){swal("",a.message,"error")})})},a.EditMe=function(b){a.us=b},a.EditMember=function(b,c){swal({title:"",text:"Are you sure you want to edit "+c,type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Yes",closeOnConfirm:!1},function(){e.addadmin(admin.username).success(function(b){swal("","admin was added successfully","success"),angular.forEach(a.allusers,function(a){admin.username===a.username&&(a.level="d")})}).error(function(a){swal("",a.message,"error")})})},a.DeleteMember=function(b,c,d){swal({title:"",text:"Are you sure you want to delete "+c,type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Yes",closeOnConfirm:!1},function(){e.deleteuser(b).success(function(){swal("","This user was removed successfully","success"),a.allusers.members.splice(d,1)}).error(function(a){swal("",a.message,"error")})})}};angular.module("admin",[]).config(["$stateProvider",function(a){a.state("admin",{url:"/admin",templateUrl:"partials/logged/admin/admin.html",controller:"adminController",onEnter:["$state","auth",function(a,b){b.isLoggedIn()||a.go("login")}]})}]).controller("adminController",["$scope","auth","$state","$rootScope","user",a]);
}(),function(){"use strict";function a(a,b,c){var d={};return d.saveToken=function(a){c.w_token=a},d.saveUser=function(a){c.user_t=a},d.getToken=function(){return c.w_token},d.isLoggedIn=function(){var a=d.getToken();if(a){var c=JSON.parse(b.atob(a.split(".")[1]));return c.exp>Date.now()/1e3}return!1},d.currentUser=function(){if(d.isLoggedIn()){var a=d.getToken(),c=JSON.parse(b.atob(a.split(".")[1]));return{username:c.username,email:c.email,avatar:c.avatar,id:c._id}}},d.register=function(b){return a.post("/auth/register",b).success(function(a){d.saveToken(a.token),d.saveUser(JSON.stringify(a.user))})},d.forgetPass=function(b){return a.post("/auth/forgetPass",b)},d.resendActivation=function(b){return a.post("/auth/resendActivation",b)},d.logIn=function(b){return a.post("/auth/login",b).success(function(a){d.saveToken(a.token),d.saveUser(JSON.stringify(a.user))})},d.logOut=function(){return a.get("/validate/logout/"+d.currentUser().username).success(function(){b.localStorage.removeItem("schInfo"),b.localStorage.removeItem("frInfo"),b.localStorage.removeItem("pInfo"),b.localStorage.removeItem("avaInfo"),delete c.w_token,delete c.user_t})},d.saveCrop=function(b,c){return a.post("/api/saveCrop",{selection:b,image:c,user:d.currentUser().username})},d.allInfo=function(){return a.get("/api/userInfo/"+d.currentUser().username)},d.changePass=function(b){return a.post("/validate/changePass",{pass:b,user:d.currentUser().username})},d.pInfo=function(b){return a.post("/validate/pInfo",{u:b,user:d.currentUser().username})},d.SchInfo=function(b){return a.post("/validate/SchInfo",{sch:b,user:d.currentUser().username})},d.getAllMembers=function(){return a.get("/api/getAllMembers/"+d.currentUser().username)},d.savesuggestions=function(b,c,d){return a.post("/auth/savesuggestions",{uname:b,msg:c,user:d})},d.getSuggestions=function(){return a.get("/api/getSuggestions/"+d.currentUser().username)},d}angular.module("wontApp").factory("auth",["$http","$window","$localStorage",a])}(),function(){"use strict";function a(a,b){var c={};return c.getAllDepts=function(b){a.get("/api/getAllDepts").success(function(a){return b.depts=a,b.depts})},c.getAlldpts=function(){return a.get("/api/getAllDepts")},c.getAllHalls=function(b){a.get("/api/getAllHalls").success(function(a){return b.halls=a,b.halls})},c.getAllhlls=function(){return a.get("/api/getAllHalls")},c.getSugFrnds=function(c){return a.get("/api/getSugFrnds/"+c+"/"+b.currentUser().username)},c.saveInfo=function(c,d,e,f){return a.post("/api/completeProfle",{sch:c,per:d,frs:e,ava:f,user:b.currentUser().username})},c.profileInfo=function(c){return a.get("/api/getProfileInfo/"+c+"/"+b.currentUser().username)},c.getallUsers=function(){return a.get("/api/getAllUsers")},c.addfriend=function(c){return a.post("/api/addfriend",{username:c,logUser:b.currentUser().username})},c.unfriend=function(c){return a.post("/api/unfriend",{username:c,logUser:b.currentUser().username})},c.blockuser=function(c){return a.post("/api/blockuser",{username:c,logUser:b.currentUser().username})},c.unblockuser=function(c){return a.post("/api/unblockuser",{username:c,logUser:b.currentUser().username})},c.getRequests=function(){return a.get("/api/getRequests/"+b.currentUser().username)},c.getNofications=function(){return a.get("/api/getNofications/"+b.currentUser().username)},c.checkpm=function(){return a.get("/api/checkpm/"+b.currentUser().username)},c.accept=function(c){return a.post("/api/acceptRequest",{username:c,logUser:b.currentUser().username})},c.ignore=function(c){return a.post("/api/ignoreRequest",{username:c,logUser:b.currentUser().username})},c.getFriends=function(b,c,d){a.get("/api/getfriends/onlyFriends/"+b+"/"+c).success(function(a){return d.friends=a,d.friends}).error(function(a){return d.friends=a,d.friends})},c.getFrFrnds=function(c){return a.get("/api/getfriends/frFriends/"+b.currentUser().username+"/"+c)},c.getFrOnline=function(c){return a.get("/api/getfriends/FrOnline/"+b.currentUser().username+"/"+c)},c.markAllAsRead=function(){return a.post("/api/markAllAsRead",{user:b.currentUser().username})},c.MarkasRead=function(b){return a.post("/api/MarkasRead",{id:b})},c.updateCheck=function(){return a.post("/api/updateCheck",{user:b.currentUser().username})},c.saveTransition=function(c){return a.post("/api/saveTransition",{type:c,user:b.currentUser().username})},c.saveCoverImgs=function(c){return a.post("/api/saveCoverImgs",{images:c,user:b.currentUser().username})},c.saveCImgs=function(c){return a.post("/api/saveCImgs",{images:c,user:b.currentUser().username})},c.removeimage=function(c){return a.post("/api/removeimage",{image:c,user:b.currentUser().username})},c.addadmin=function(c){return a.post("/api/addadmin",{username:c,user:b.currentUser().username})},c.removeadmin=function(c){return a.post("/api/removeadmin",{id:c,user:b.currentUser().username})},c.deleteuser=function(c){return a.post("/api/deleteuser",{id:c,user:b.currentUser().username})},c}angular.module("wontApp").factory("user",["$http","auth",a])}(),function(){"use strict";function a(a,b,c){var d={};return d.makePost=function(b,d){return a.post("/subApi/submitSub",{type:"text",post:b,taah:d,user:c.currentUser().username})},d.newLink=function(b,d){return a.post("/subApi/submitSub",{type:"link",post:b,taah:d,user:c.currentUser().username})},d.replymsub=function(b,d){return a.post("/subApi/submitReply",{type:"mrep",post:b,id:d,chid:d,user:c.currentUser().username})},d.replyssub=function(b,d,e){return a.post("/subApi/submitReply",{type:"srep",post:b,id:d,chid:e,user:c.currentUser().username})},d.upvote=function(b){return a.post("/subApi/vote",{type:"up",id:b,user:c.currentUser().username})},d.downvote=function(b){return a.post("/subApi/vote",{type:"down",id:b,user:c.currentUser().username})},d.removesub=function(b){return a.post("/subApi/remove",{type:"sub",id:b,user:c.currentUser().username})},d.savedSub=function(b){return a.post("/subApi/savestatus",{type:"save",id:b,user:c.currentUser().username})},d.unsaveSub=function(b){return a.post("/subApi/savestatus",{type:"unsave",id:b,user:c.currentUser().username})},d.getcomments=function(b){return a.get("/subApi/getcomments/"+b+"/"+c.currentUser().username)},d.getUserTaahs=function(){return a.get("/subApi/getutaahs/"+c.currentUser().username)},d.getAllHot=function(b){return a.get("/subApi/getsubmissions/getAllHot/"+b+"/"+c.currentUser().username+"/v/name")},d.getAllNew=function(b){return a.get("/subApi/getsubmissions/getAllNew/"+b+"/"+c.currentUser().username+"/v/name")},d.getAllCon=function(b,d){return a.get("/subApi/getsubmissions/getAllCon/"+b+"/"+c.currentUser().username+"/"+d+"/name")},d.getAllTop=function(b,d){return a.get("/subApi/getsubmissions/getAllTop/"+b+"/"+c.currentUser().username+"/"+d+"/name")},d.getTaahHot=function(b,d){return a.get("/subApi/getsubmissions/getTaahHot/"+b+"/"+c.currentUser().username+"/v/"+d)},d.getTaahNew=function(b,d){return a.get("/subApi/getsubmissions/getTaahNew/"+b+"/"+c.currentUser().username+"/v/"+d)},d.getTaahCon=function(b,d,e){return a.get("/subApi/getsubmissions/getTaahCon/"+b+"/"+c.currentUser().username+"/"+d+"/"+e)},d.getTaahTop=function(b,d,e){return a.get("/subApi/getsubmissions/getTaahTop/"+b+"/"+c.currentUser().username+"/"+d+"/"+e)},d.getUserHot=function(b,d){return a.get("/subApi/getsubmissions/getUserHot/"+b+"/"+c.currentUser().username+"/v/"+d)},d.getUserNew=function(b,d){return a.get("/subApi/getsubmissions/getUserNew/"+b+"/"+c.currentUser().username+"/v/"+d)},d.getUserCon=function(b,d,e){return a.get("/subApi/getsubmissions/getUserCon/"+b+"/"+c.currentUser().username+"/"+d+"/"+e)},d.getUserTop=function(b,d,e){return a.get("/subApi/getsubmissions/getUserTop/"+b+"/"+c.currentUser().username+"/"+d+"/"+e)},d.getUserSaved=function(b,d){return a.get("/subApi/getsubmissions/getUserSaved/"+b+"/"+c.currentUser().username+"/v/"+d)},d.getSubmission=function(b){return a.get("/subApi/getSubmission/"+b+"/"+c.currentUser().username)},d}angular.module("wontApp").factory("sub",["$http","$window","auth",a])}(),function(){"use strict";function a(a,b,c,d,e){var f={};return f.subAlt=function(a,b,c){a.postedtimes=c.postedtimesquery(),a.postedtime=a.postedtimes[0],a.postedtime2=a.postedtimes[0],a.removepost=function(c,d,e){swal({title:"Are you sure?",text:"You will completely remove this submission and all of its comments",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-sm btn-success",cancelButtonClass:"btn-sm btn-danger",confirmButtonText:"Remove",closeOnConfirm:!1},function(){b.remove(c,d,e,a.hot,a.new,a.con,a.top,a.ussubs="")})},a.upVotePost=function(c,d,e){b.upvotes(c,d,e,a.hot,a.new,a.con,a.top,a.ussubs="")},a.downVotePost=function(c,d,e){b.downvotes(c,d,e,a.hot,a.new,a.con,a.top,a.ussubs="")},a.SavePost=function(c,d){b.save(c,d,a.hot,a.new,a.con,a.top,a.ussubs="")},a.unSavePost=function(c,d){b.unsave(c,d,a.hot,a.new,a.con,a.top,a.ussubs="")},a.HidePost=function(a,c){b.hide(a,c)}},f.LogUserInfo=function(b){a.allInfo().success(function(a){b.admin=!1,b.id=a._id,b.luname=a.username,b.lavatar=a.avatar,b.lemail=a.email,b.userlevel=a.userlevel,b.lstatus=a.school.status,b.sug=a.school.ug,a.school.status&&(b.lug=a.school.ug),"d"===a.userlevel&&(b.admin=!0)}).error(function(a){})},f.statusVariables=function(a,b,c,d){a.limit=b,a.load=c,a.type=d},f.successfunc=function(a,b,c){angular.forEach(c.data,function(b){if(a.mobile){var c=b.postdate.split(" "),d="";"second"===c[1]||"seconds"===c[1]?d="s":"minute"===c[1]||"minutes"===c[1]?d="min":"hour"===c[1]||"hours"===c[1]?d="h":"day"===c[1]||"days"===c[1]?d="d":"week"===c[1]||"weeks"===c[1]?d="w":"month"===c[1]||"months"===c[1]?d="mon":"year"!==c[1]&&"year"!==c[1]||(d="y"),b.postdate=c[0]+""+d}}),"h"===b?(a.ho=c.data,a.hot=a.ho.sort(function(a,b){return a.score<b.score?1:b.score<a.score?-1:0})):"c"===b?(a.co=c.data,a.con=a.co.sort(function(a,b){return a.cont<b.cont?1:b.cont<a.cont?-1:0})):"n"===b?a.new=c.data:"t"===b?(a.to=c.data,a.top=a.to.sort(function(a,b){return a.diff<b.diff?1:b.diff<a.diff?-1:0})):"s"===b&&(a.save=c.data),a.type=c.data,a.limit=c.limit,a.isError=c.isError,a.size=c.size,a.load=!1,a.mload=!1},f.errorfunc=function(a,b){a.message=b,a.isError=b.isError,a.load=!1,a.mload=!1},f.fulldialog=function(a,d,e){var f=(c("sm")||c("xs"))&&(c("xs")||c("sm"));b.show({controller:d,templateUrl:e,parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,fullscreen:f})},f.scopeOnly=function(a){a.cancel=function(){b.cancel()}},f.sideNav=function(a){function b(a){return function(){d(a).toggle().then(function(){e.debug("toggle "+a+" is done")})}}a.toggleRight=b("right"),a.isOpenRight=function(){return d("right").isOpen()},a.close=function(){d("right").close().then(function(){e.debug("close RIGHT is done")})}},f.Load=function(a,b,c){a.loading=b,a.isProcessing=c},f}angular.module("wontApp").factory("msub",["auth","$mdDialog","$mdMedia","$mdSidenav","$log",a])}(),function(){"use strict";function a(a,b){var c={};return c.gettaahbyname=function(c){return a.get("/taahApi/gettaahbyname/"+c+"/"+b.currentUser().username)},c.getAllTaahs=function(){return a.get("/taahApi/getAllTaahs/"+b.currentUser().username)},c.createTaah=function(c){return a.post("/taahApi/createTaah",{taah:c,user:b.currentUser().username})},c.editTaah=function(c,d,e,f,g){return a.post("/taahApi/editTaah",{title:c,desc:d,type:e,coption:f,id:g,user:b.currentUser().username})},c.subscribeNow=function(c){return a.post("/taahApi/subscription",{type:"main",status:"subscribe",name:c,user:b.currentUser().username})},c.MakeSubscribtion=function(c){return a.post("/taahApi/subscription",{type:"ffriend",status:"subscribe",name:c,user:b.currentUser().username})},c.unsubscribeNow=function(c){return a.post("/taahApi/subscription",{type:"main",status:"unsubscribe",name:c,user:b.currentUser().username})},c.InviteFrnds=function(c,d){return a.post("/taahApi/InviteFrnds",{frnds:c,taah:d,user:b.currentUser().username})},c.inviteFrnd=function(c,d){return a.post("/taahApi/InviteFrnd",{frnd:d,taahs:c,user:b.currentUser().username})},c.ignoreTaah=function(c){return a.post("/taahApi/ignoreTaahRequest",{taah:c,user:b.currentUser().username})},c.acceptSub=function(b,c){return a.post("/taahApi/acceptSub",{taah:c,user:b})},c.ignoreSub=function(b,c){return a.post("/taahApi/ignoreSub",{taah:c,user:b})},c}angular.module("wontApp").factory("taah",["$http","auth",a])}(),function(){function a(a){this.upvotes=function(b,c,d,e,f,g,h,i){return a.upvote(b).then(function(a){if(a.data.isSuccess){var b;"h"===d?b=e[c]:"n"===d?b=f[c]:"c"===d?b=g[c]:"t"===d?b=h[c]:"s"===d?b=i[c]:"a"===d&&(b=c),b.userVoted===!0&&b.voteStatus===!0?(b.up--,b.userVoted=!1,b.voteStatus=""):b.userVoted===!1?(b.up++,b.userVoted=!0,b.voteStatus=!0):b.voteStatus===!1&&b.userVoted===!0&&(b.up++,b.down--,b.userVoted=!0,b.voteStatus=!0)}else swal("","unknown error occurred, try again later","error")})},this.downvotes=function(b,c,d,e,f,g,h,i){return a.downvote(b).then(function(a){if(a.data.isSuccess){var b;"h"===d?b=e[c]:"n"===d?b=f[c]:"c"===d?b=g[c]:"t"===d?b=h[c]:"s"===d?b=i[c]:"a"===d&&(b=c),b.userVoted===!0&&b.voteStatus===!1?(b.down--,b.userVoted=!1,b.voteStatus=""):b.userVoted===!1?(b.down++,b.voteStatus=!1,b.userVoted=!0):b.voteStatus===!0&&b.userVoted===!0&&(b.up--,b.down++,b.voteStatus=!1,b.userVoted=!0)}else swal("","unknown error occurred, try again later","error")})},this.remove=function(b,c,d,e,f,g,h,i){return a.removesub(b).then(function(a){return a.data.isError?(swal("",a.data.msg,"warning"),!1):void(a.data.isSuccess&&("h"===d?e.splice(c,1):"n"===d?f.splice(c,1):"c"===d?g.splice(c,1):"t"===d?h.splice(c,1):"s"===d?i.splice(c,1):"a"===d&&e.splice(c,1),swal("","You've successfully remove the submission","success")))})},this.save=function(b,c,d,e,f,g,h){a.savedSub(b).then(function(a){if(a.data.isSuccess){var i="";if("h"===c)i=d;else if("n"===c)i=e;else if("c"===c)i=f;else if("t"===c)i=g;else if("s"===c)i=h;else{if("a"===c)return i=d.saved=!0,!1;i=""}angular.forEach(i,function(a){b===a.id&&(a.saved=!0)})}})},this.unsave=function(b,c,d,e,f,g,h){a.unsaveSub(b).then(function(a){if(a.data.isSuccess){var i="";if("h"===c)i=d;else if("n"===c)i=e;else if("c"===c)i=f;else if("t"===c)i=g;else if("s"===c)i=h;else{if("a"===c)return i=d.saved=!1,!1;i=""}angular.forEach(i,function(a){b===a.id&&(a.saved=!1)})}})},this.hide=function(a,b){$("#"+b+"post_"+a).css("display","none")}}angular.module("wontApp").service("vote",["sub",a])}(),function(){"use strict";angular.module("wontApp").service("postedtimes",function(){this.postedtimesquery=function(){return[{name:"past 24 hours",value:"24h"},{name:"past hour",value:"1h"},{name:"past week",value:"7d"},{name:"past month",value:"30d"},{name:"past year",value:"1y"},{name:"all time",value:"all"}]}})}(),function(){"use strict";angular.module("wontApp").service("opt",function(){this.options=function(){return[{name:"All",value:"1"},{name:"Department",value:"Department"},{name:"Level",value:"school.level"},{name:"Hall",value:"school.hall"},{name:"Gender",value:"gender"}]},this.gender=function(){return[{name:"All",_id:"1"},{name:"Male",_id:"m"},{name:"Female",_id:"f"}]},this.lvl=function(){return[{name:"All",_id:"1"},{name:"100",_id:"100"},{name:"200",_id:"200"},{name:"300",_id:"300"},{name:"400",_id:"400"},{name:"500",_id:"500"},{name:"600",_id:"600"}]}})}(),function(){"use strict";function a(a,b){var c={};return c.getAllUgStudents=function(){return a.get("/dictApi/getAllUgStudents")},c.FirstFilter=function(b,c){return a.get("/dictApi/FirstFilter/"+b+"/"+c)},c.SecondFilter=function(b,c,d,e){return a.get("/dictApi/SecondFilter/"+b+"/"+c+"/"+d+"/"+e)},c.ThirdFilter=function(b,c,d,e,f,g){return a.get("/dictApi/ThirdFilter/"+b+"/"+c+"/"+d+"/"+e+"/"+f+"/"+g)},c.FourthFilter=function(b,c,d,e,f,g,h,i){return a.get("/dictApi/FourthFilter/"+b+"/"+c+"/"+d+"/"+e+"/"+f+"/"+g+"/"+h+"/"+i)},c}angular.module("wontApp").factory("dict",["$http","auth",a])}(),function(){"use strict";function a(a,b){var c={};return c.sendMessage=function(c,d,e){return a.post("/inboxApi/sendMessage",{to:c,title:d,msg:e,user:b.currentUser().username})},c.markasRead=function(c,d){return a.post("/inboxApi/markasRead",{id:c,sender:d,user:b.currentUser().username})},c.replymsg=function(c,d,e){return a.post("/inboxApi/replymsg",{sender:c,id:e,msg:d,user:b.currentUser().username})},c.deletemessage=function(c,d){return a.post("/inboxApi/deletemessage",{sender:d,id:c,user:b.currentUser().username})},c.deletereply=function(c){return a.post("/inboxApi/deletereply",{id:c,user:b.currentUser().username})},c.getReceivedMsgs=function(){return a.get("/inboxApi/getMsgs/ReceivedMsgs/"+b.currentUser().username)},c.getSentMsgs=function(){return a.get("/inboxApi/getMsgs/SentMsgs/"+b.currentUser().username)},c.getMessageBody=function(c){return a.get("/inboxApi/getMessageBody/"+c+"/"+b.currentUser().username)},c}angular.module("wontApp").factory("inbox",["$http","auth",a])}(),function(){"use strict";angular.module("wontApp").directive("homeDesktop",function(){return{restrict:"E",templateUrl:"partials/templates/home/home-desktop.html",link:function(a,b,c){}}}).directive("homeMobile",function(){return{restrict:"E",templateUrl:"partials/templates/home/home-mobile.html",link:function(a,b,c){}}}).directive("createTaah",function(){return{restrict:"AE",templateUrl:"partials/templates/createTaah.tpl.html",link:function(a,b,c){}}}).directive("navMobile",function(){return{restrict:"E",controller:"navController",templateUrl:"partials/templates/mobile/nav.mob.html",link:function(a,b,c){}}}).directive("leftBar",function(){return{restrict:"E",controller:"navController",templateUrl:"partials/templates/mobile/leftbar.html",link:function(a,b,c){}}}).directive("rightBar",function(){return{restrict:"E",controller:"navController",templateUrl:"partials/templates/mobile/rightbar.html",link:function(a,b,c){}}}).directive("refreshBrowser",function(){return{restrict:"E",template:'<div id="refresh" style="display:none;" class="row">               <div class="col-md-12 wt-middle">                   <h2 class="h2 text-muted">Refresh your browser</h2>                   <button class="btn mob-primary" ng-click="reloadPage();">Refresh</button>               </div>          </div>'}}).directive("contributionBox",function(){return{restrict:"E",template:"<md-button ng-click='revealCont(\"contributionBox\");' class='contribution-button'  aria-label='Your contribution' >               <i>Your contribution</i>           </md-button>           <div id='contributionBox' class='contribution-box'>                <div>                    <div>                        <a ng-click='revealCont(\"contributionBox\");' class='contribution-close'>                               <i class='ion ion-close'></i>                       </a>                    </div>                    <input class='form-control' name='uname' ng-model='Suname' placeholder='Enter full name'/>                    <textarea class='form-control' name='body' ng-model='Smessage' placeholder='Your contribution (Your contribution is very important to us)'></textarea>                    <button ng-click='SaveSuggestion();' class='btn btn-primary'>Drop it!</button>                </div>            </div>"}})}(),function(){"use strict";var a=function(a){var b;return{restrict:"A",require:"ngModel",link:function(c,d,e,f){c.$watch(e.ngModel,function(c){b&&clearTimeout(b),b=setTimeout(function(){a.get("/validate/uniqueUsername/"+c).success(function(){f.$setValidity("uniqueUsername",!0)}).error(function(){f.$setValidity("uniqueUsername",!1)})},200)})}}},b=function(a){var b;return{restrict:"A",require:"ngModel",link:function(c,d,e,f){c.$watch(e.ngModel,function(c){b&&clearTimeout(b),b=setTimeout(function(){a.get("/validate/uniqueEmail/"+c).success(function(){f.$setValidity("uniqueEmail",!0)}).error(function(){f.$setValidity("uniqueEmail",!1)})},200)})}}},c=function(){return{restrict:"A",scope:!0,require:"ngModel",link:function(a,b,c,d){var e=function(){var b=a.$eval(c.ngModel),d=a.$eval(c.passwordMatch);if(null!==d)return b===d};a.$watch(e,function(a){d.$setValidity("passwordNoMatch",a)})}}},d=function(a){var b;return{restrict:"A",require:"ngModel",link:function(c,d,e,f){c.$watch(e.ngModel,function(c){b&&clearTimeout(b),b=setTimeout(function(){a.get("/validate/validCredential/"+c).success(function(){f.$setValidity("validCredential",!0)}).error(function(){f.$setValidity("validCredential",!1)})},200)})}}},e=function(a){var b;return{restrict:"A",require:"ngModel",link:function(c,d,e,f){c.$watch(e.ngModel,function(c){b&&clearTimeout(b),b=setTimeout(function(){a.get("/validate/uniqueTaahname/"+c).success(function(){f.$setValidity("uniqueTaahname",!0)}).error(function(){f.$setValidity("uniqueTaahname",!1)})},200)})}}},f=function(a,b){var c;return{restrict:"A",require:"ngModel",link:function(d,e,f,g){d.$watch(f.ngModel,function(d){c&&clearTimeout(c),c=setTimeout(function(){a.post("/api/checkpass",{username:b.currentUser().username,password:d}).success(function(){g.$setValidity("validPass",!0)}).error(function(){g.$setValidity("validPass",!1)})},200)})}}};angular.module("wontApp").directive("uniqueUsername",["$http",a]),angular.module("wontApp").directive("uniqueEmail",["$http",b]),angular.module("wontApp").directive("passwordMatch",[c]),angular.module("wontApp").directive("validCredential",["$http",d]),angular.module("wontApp").directive("uniqueTaahname",["$http",e]),angular.module("wontApp").directive("validPass",["$http","auth",f])}(),function(){"use strict";function a(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.bind("keyup",function(c){a.$apply(function(){var a=new RegExp,c=b[0].id;"email"===c?a=/[' "]/gi:"username"===c?a=/[^a-z0-9_]/gi:"fname"===c?a=/[^a-z0-9- ]/gi:"lname"===c?a=/[^a-z0-9- ]/gi:"taahname"===c&&(a=/[^a-z0-9_]/gi),b[0].value=b[0].value.replace(a,"")})})}}}angular.module("wontApp").directive("cuFocus",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$focused=!1,b.bind("focus",function(b){a.$apply(function(){d.$focused=!0})}).bind("blur",function(b){a.$apply(function(){d.$focused=!1})})}}}),angular.module("wontApp").directive("removeUnwanted",a)}(),function(){function a(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(b)!==-1}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb);if(b.isFile(g.file)&&b.isImage(g.file)){var h=c.find("canvas"),i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}angular.module("wontApp").directive("ngThumb",["$window",a])}(),function(){"use strict";angular.module("wontApp").filter("hostnameFromUrl",function(){return function(a){var b=document.createElement("a");return b.href=a,b.hostname}})}(),function(){"use strict";angular.module("wontApp").filter("cut",function(){return function(a,b,c,d){if(!a)return"";if(c=parseInt(c,10),!c)return a;if(a.length<=c)return a;if(a=a.substr(0,c),b){var e=a.lastIndexOf(" ");e!=-1&&(a=a.substr(0,e))}return a+(d||" …")}}).filter("startFrom",function(){return function(a,b){return a.slice(b)}})}();